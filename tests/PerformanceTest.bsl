#Если Сервер Тогда

// Автоматический тест производительности
Процедура ЗапуститьТесты() Экспорт
    ТестДанных = СоздатьТестовыеДанные();
    Результаты = Новый ТаблицаЗначений;
    Результаты.Колонки.Добавить("Тест");
    Результаты.Колонки.Добавить("Время");
    Результаты.Колонки.Добавить("Успех");
    
    // Тест 1: Медленный запрос
    Начало = ТекущаяДата();
    Попытка
        Данные1 = ТОПОтчет.ПолучитьТОПТоваров_Медленно(НачПериода(), КонПериода());
        Успех1 = Истина;
    Исключение Успех1 = Ложь; КонецПопытки;
    Время1 = ТекущаяДата() - Начало;
    
    // Тест 2: Оптимизированный запрос
    Начало = ТекущаяДата();
    Попытка
        Данные2 = ТОПОтчет.ПолучитьТОПТоваров(НачПериода(), КонПериода());
        Успех2 = Истина;
    Исключение Успех2 = Ложь; КонецПопытки;
    Время2 = ТекущаяДата() - Начало;
    
    // Запись результатов
    Строка = Результаты.Добавить();
    Строка.Тест = "Медленный запрос";
    Строка.Время = Формат(Время1, "ЧДЦ=3");
    Строка.Успех = Успех1;
    
    Строка = Результаты.Добавить();
    Строка.Тест = "Оптимизированный";
    Строка.Время = Формат(Время2, "ЧДЦ=3");
    Строка.Успех = Успех2;
    
    // Вывод в табличный документ
    ВывестиРезультаты(Результаты);
КонецПроцедуры

#КонецЕсли
